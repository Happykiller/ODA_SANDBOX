var wowhead_tooltips={colorlinks:!0,iconizelinks:!0,renamelinks:!0};!function(){"use strict";function _init(){$.Oda.Event.addListener({name:"oda-fully-loaded",callback:function(e){$.Oda.App.startApp()}})}var VERSION="0.1";$.Oda.App={version:VERSION,colorCard:{Commune:"#848484",Commune_inv:"#B0B0B0",Rare:"#2E2EFE",Rare_inv:"#5A5AFF","Épique":"#8904B1","Épique_inv":"#AA61C1","Légendaire":"#FF8000","Légendaire_inv":"#FFB163"},colorClasse:{Death_Knight:"#C41F3B",Druide:"#FF7D0A",Chasseur:"#ABD473",Mage:"#69CCF0",Moine:"#00FF96",Paladin:"#F58CBA","Prêtre":"#FFFFFF",Voleur:"#FFF569",Chaman:"#0070DE","Démoniste":"#9482C9",Guerrier:"#C79C6E"},chosenClass:"",tab_sets:["Tous","Expert","La Malédiction de Naxxramas","Gobelins et Gnomes","Mont Rochenoire"],startApp:function(p_params){try{return $.Oda.Context.projectLabel="ODA HOW",$.Oda.Router.addDependencies("wowhead",{ordered:!1,list:[{elt:"http://wowjs.zamimg.com/widgets/power.js",type:"script"}]}),$.Oda.Router.addRoute("home",{path:"partials/home.html",title:"oda-main.home-title",urls:["","home"],dependencies:["dataTables","wowhead"],middleWares:["support","auth"]}),$.Oda.Router.addRoute("saisir_paquet",{path:"partials/paquet-add.html",title:"paquet-add.title",urls:["saisir_paquet"],dependencies:["dataTables","wowhead"],middleWares:["support","auth"]}),$.Oda.Router.addRoute("rapports_cartes",{path:"partials/rapports_cartes.html",title:"rapports-cartes.title",urls:["rapports_cartes"],dependencies:["dataTables","hightcharts","wowhead"],middleWares:["support","auth"]}),$.Oda.Router.addRoute("gerer_collection",{path:"partials/gerer_collection.html",title:"gerer-coll.title",urls:["gerer_collection"],dependencies:["dataTables","wowhead"],middleWares:["support","auth"]}),$.Oda.Router.addRoute("gerer_deck",{path:"partials/gerer_deck.html",title:"gerer-deck.title",urls:["gerer_deck"],dependencies:["dataTables","hightcharts","wowhead"],middleWares:["support","auth"]}),$.Oda.Router.addRoute("saisir_matchs",{path:"partials/rec_matchs.html",title:"rec-matchs.title",urls:["saisir_matchs"],dependencies:["dataTables","hightcharts","wowhead"],middleWares:["support","auth"]}),$.Oda.Router.addRoute("rapports_matchs",{path:"partials/rapports_matchs.html",title:"rapports-matchs.title",urls:["rapports_matchs"],dependencies:["dataTables","hightcharts","wowhead"],middleWares:["support","auth"]}),$.Oda.Router.addRoute("rapports_meta",{path:"partials/rapports_meta.html",title:"rapports-meta.title",urls:["rapports_meta"],dependencies:["dataTables","hightcharts","wowhead"],middleWares:["support","auth"]}),$.Oda.Router.startRooter(),this}catch(er){return $.Oda.Log.error("$.Oda.App.startApp : "+er.message),null}},Controler:{GererDeck:{start:function(p_params){try{return $.Oda.App.Controler.GererDeck.loadListDeck(),this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.GererDeck.start : "+er.message),null}},loadListDeck:function(p_params){try{$.Oda.Display.loading({elt:$("#listDeckContent")});var tabSetting={functionRetour:function(p_retour){var strhtml='<table cellpadding="0" cellspacing="0" border="0" class="display hover" id="table_listDeck" style="width: 100%"></table>';$("#listDeckContent").html(strhtml);{var objDataTable=$.Oda.Tooling.objDataTableFromJsonArray(p_retour.data.listDeck.data);$("#table_listDeck").dataTable({sPaginationType:"full_numbers",iDisplayLength:20,aaData:objDataTable.data,aaSorting:[[5,"desc"],[2,"desc"]],aoColumns:[{sTitle:"Nom"},{sTitle:"Classe"},{sTitle:"Quote"},{sTitle:"Type"},{sTitle:"Date",sClass:"dataTableColCenter",sWidth:"175px"},{sTitle:"Actif",sClass:"dataTableColCenter"},{sTitle:"Action",sClass:"dataTableColCenter"}],aoColumnDefs:[{mRender:function(data,type,row){var strHtml="<a href=\"javascript:$.Oda.App.Controler.GererDeck.seeDeck({id:'"+row[objDataTable.entete.id]+"'});\">"+row[objDataTable.entete.nom_deck]+"</a>";return strHtml},aTargets:[0]},{mRender:function(data,type,row){var strHtml=row[objDataTable.entete.classe];return strHtml},aTargets:[1]},{mRender:function(data,type,row){var quote=parseInt(row[objDataTable.entete.quote]);return"display"===type?quote+"%":quote},aTargets:[2]},{mRender:function(data,type,row){var strHtml=row[objDataTable.entete.type];return strHtml},aTargets:[3]},{mRender:function(data,type,row){var strHtml=row[objDataTable.entete.date];return strHtml},aTargets:[4]},{mRender:function(data,type,row){var strHtml=row[objDataTable.entete.actif];return strHtml},aTargets:[5]},{mRender:function(data,type,row){var strHtml="<a href=\"javascript:$.Oda.App.Controler.GererDeck.seeDeck({id:'"+row[objDataTable.entete.id]+'\'});" class="btn btn-xs"><span class="glyphicon glyphicon-eye-open"></span></a>';return strHtml+="<a href=\"javascript:$.Oda.App.Controler.GererDeck.editDeck({id:'"+row[objDataTable.entete.id]+"', name : '"+row[objDataTable.entete.nom_deck]+'\'});" class="btn btn-xs"><span class="glyphicon glyphicon-pencil"></span></a>'},aTargets:[6]}],fnDrawCallback:function(oSettings){$("#table_listDeck").removeClass("display").addClass("table table-striped table-bordered")}})}}},tabInput={code_user:$.Oda.Session.code_user,option_actif:"",type:""};return $.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/getListDeck.php",tabSetting,tabInput),this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.GererDeck.loadListDeck : "+er.message),null}},editDeck:function(p_params){try{var strHtmlDetails=$.Oda.Display.TemplateHtml.create({template:"deck-list",scope:{}});return $.Oda.App.Controler.GererDeck.editTheDeck({id:p_params.id}),$.Oda.Display.Popup.open({size:"lg",label:'<span oda-label="gerer-deck.detailsDeck"></span> : '+p_params.name,details:strHtmlDetails}),this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.GererDeck.editDeck : "+er.message),null}},newDeck:function(p_params){try{$.Oda.Scope.refresh=function(){$("#deckName").data("isOk")&&$("#deckCmt").data("isOk")&&$("#deckClass").data("isOk")&&$("#deckType").data("isOk")?$("#bt_valider").removeClass("disabled"):$("#bt_valider").addClass("disabled")};var strHtmlDetails=$.Oda.Display.TemplateHtml.create({template:"deck-new",scope:{}}),strHtmlFooter="";return strHtmlFooter+='<button type="button" onclick="$.Oda.App.Controler.GererDeck.recNewDeck();" class="btn btn-primary disabled" oda-submit="bt_valider"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> '+$.Oda.I8n.get("oda-main","bt-submit")+"</button>",strHtmlFooter+='<a href="javascript:$.Oda.Display.Popup.close();" class="btn btn-default" id="bt_annuler_user"><span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span> '+$.Oda.I8n.get("oda-main","bt-cancel")+"</a>",$.Oda.Display.Popup.open({size:"lg",label:'<span oda-label="gerer-deck.newDeck"></span>',details:strHtmlDetails,footer:strHtmlFooter}),this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.GererDeck.newDeck : "+er.message),null}},editTheDeck:function(p_params){try{if(p_params.hasOwnProperty("id")&&0!==p_params.id){var tabInput={id_deck:p_params.id,code_user:$.Oda.Session.code_user};$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/getDeckDetails.php",{functionRetour:function(json_retour){var nb_carte=parseInt(json_retour.data.nb_carte_in_deck);30>nb_carte?$.Oda.App.Controler.GererDeck.loadCards({idDeck:p_params.id,type:json_retour.data.deck_header.type}):$("#div_inventaire").html("Plus d'ajout possible.");var strhtml='<table cellpadding="0" cellspacing="0" border="0" class="display hover" style="width: 100%" id="table_deckList"></table>';$("#div_paquet").html(strhtml);{var objDataTable=$.Oda.Tooling.objDataTableFromJsonArray(json_retour.data.resultat.data);$("#table_deckList").dataTable({sPaginationType:"full_numbers",aaData:objDataTable.data,aaSorting:[[2,"asc"]],bPaginate:!1,iDisplayLength:50,aoColumns:[{sTitle:"Nombre",sClass:"dataTableColCenter",sWidth:"30px"},{sTitle:"Nom",sClass:"left"},{sTitle:"Mana",sClass:"dataTableColCenter",sWidth:"30px"},{sTitle:"Action",sClass:"dataTableColCenter",sWidth:"30px"}],aoColumnDefs:[{mRender:function(data,type,row){var strHtml=row[objDataTable.entete.nb];return strHtml},aTargets:[0]},{mRender:function(data,type,row){var dore="";"1"==row[objDataTable.entete.gold]&&(dore="&amp;premium");var strHtml='<a href="http://www.wowhead.com/hearthstone/card='+row[objDataTable.entete.id_link]+dore+'" style="color: '+$.Oda.App.colorCard[row[objDataTable.entete.qualite]]+';text-decoration: none">'+row[objDataTable.entete.nom_carte]+"</a>";return strHtml},aTargets:[1]},{mRender:function(data,type,row){var strHtml=row[objDataTable.entete.cout];return strHtml},aTargets:[2]},{mRender:function(data,type,row){var strHtml='<a href="javascript:$.Oda.App.Controler.GererDeck.deckListDelete({idDeck : '+p_params.id+",nb : "+row[objDataTable.entete.nb]+", idCard : "+row[objDataTable.entete.max_id_collec]+'});" class="btn btn-xs"><span class="glyphicon glyphicon-remove"></span></a>';return strHtml},aTargets:[3]}],fnDrawCallback:function(oSettings){$("#table_deckList").removeClass("display").addClass("table table-striped table-bordered")}})}$("#div_deckModifInfos").html("Nombre de carte dans le deck : "+json_retour.data.nb_carte_in_deck);var datas=$.Oda.App.Controler.GererDeck.buildDatasForGraph(json_retour.data);$("#div_graphCout").highcharts({chart:{type:"column"},title:{text:"La curve"},tooltip:{enabled:!1},exporting:{enabled:!1},xAxis:{categories:datas.categories},yAxis:{gridLineColor:"transparent",title:{enabled:!1},labels:{enabled:!1}},plotOptions:{column:{dataLabels:{enabled:!0,formatter:function(){return"Total"==this.x?10*this.y:this.y}}}},series:datas.series}),$("#div_graphRepart").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:"Type de carte"},tooltip:{pointFormat:"Nombre : {point.y}: <br> Pourcentage : {point.percentage:.1f}%"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.y} {point.name}(s)<br>{point.percentage:.1f}%",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},series:[{type:"pie",name:"Type",data:datas.dataSeries}]})}},tabInput)}return this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.GererDeck.editTheDeck : "+er.message),null}},loadCards:function(p_params){try{var tabInput={type:"arene",code_user:$.Oda.Session.code_user};"regular"===p_params.type&&(tabInput.type="collection");{$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/getCards.php",{functionRetour:function(json_retour){var strhtml='<table cellpadding="0" cellspacing="0" border="0" class="display hover" style="width: 100%" id="table_cards"></table>';$("#div_inventaire").html(strhtml);{var objDataTable=$.Oda.Tooling.objDataTableFromJsonArray(json_retour.data.cartes.data);$("#table_cards").dataTable({sPaginationType:"full_numbers",aaData:objDataTable.data,aaSorting:[[0,"asc"]],aoColumns:[{sTitle:"Nom",sClass:"left"},{sTitle:"Mana",sClass:"dataTableColCenter",sWidth:"30px"},{sTitle:"Action",sClass:"dataTableColCenter",sWidth:"30px"}],aoColumnDefs:[{mRender:function(data,type,row){var strHtml='<a href="http://www.wowhead.com/hearthstone/card='+row[objDataTable.entete.id_link]+'" style="color: '+$.Oda.App.colorCard[row[objDataTable.entete.qualite]]+';text-decoration: none">'+row[objDataTable.entete.nom]+"</a>";return strHtml},aTargets:[0]},{mRender:function(data,type,row){var strHtml=String(row[9]);return strHtml},aTargets:[1]},{mRender:function(data,type,row){var strHtml='<a href="javascript:$.Oda.App.Controler.GererDeck.addToDeck({idDeck : '+p_params.idDeck+",idCard : "+row[objDataTable.entete.id]+', gold : 0});" class="btn btn-xs"><span class="glyphicon glyphicon-plus"></span></a>';return strHtml},aTargets:[2]}],fnDrawCallback:function(oSettings){$("#table_cards").removeClass("display").addClass("table table-striped table-bordered")}})}}},tabInput)}return this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.GererDeck.loadCards : "+er.message),null}},addToDeck:function(p_params){try{{var tabInput={id_deck:p_params.idDeck,code_user:$.Oda.Session.code_user,id_card:p_params.idCard,gold:p_params.gold};$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/deckEditionAdd.php",{functionRetour:function(data){$.Oda.App.Controler.GererDeck.editTheDeck({id:p_params.idDeck})}},tabInput)}return this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.GererDeck.addToDeck : "+er.message),null}},deckListDelete:function(p_params){try{{var tabInput={id_deck:p_params.idDeck,id_card_in_deck:p_params.idCard,code_user:$.Oda.Session.code_user};$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/deckEditionRemove.php",{functionRetour:function(data){$.Oda.App.Controler.GererDeck.editTheDeck({id:p_params.idDeck})}},tabInput)}return this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.GererDeck.deckListDelete : "+er.message),null}},seeDeck:function(p_params){try{{$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/getHeaderDeck.php",{functionRetour:function(data){var strHtmlDetails=$.Oda.Display.TemplateHtml.create({template:"deck-details",scope:{deckActif:data.data.resultat.actif,deckName:data.data.resultat.nom_deck,deckType:data.data.resultat.type,deckCmt:data.data.resultat.commentaire}}),strHtmlFooter="";strHtmlFooter+='<button type="button" onclick="$.Oda.App.Controler.GererDeck.recHeaderDeck({deckId : '+p_params.id+", oldName : '"+data.data.resultat.nom_deck+'\'});" class="btn btn-primary disabled" oda-submit="bt_valider"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span> '+$.Oda.I8n.get("oda-main","bt-submit")+"</button>",strHtmlFooter+='<a href="javascript:$.Oda.Display.Popup.close();" class="btn btn-default" id="bt_annuler_user"><span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span> '+$.Oda.I8n.get("oda-main","bt-cancel")+"</a>",$.Oda.Display.Popup.open({size:"lg",label:'<span oda-label="gerer-deck.detailsDeck"></span> : '+data.data.resultat.nom_deck,details:strHtmlDetails,footer:strHtmlFooter,callback:function(data){$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/getDeckDetails.php",{functionRetour:function(data){var datas=$.Oda.App.Controler.GererDeck.buildDatasForGraph(data.data);$("#div_graphCout").highcharts({chart:{type:"column"},title:{text:"La curve"},tooltip:{enabled:!1},exporting:{enabled:!1},xAxis:{categories:datas.categories},yAxis:{gridLineColor:"transparent",title:{enabled:!1},labels:{enabled:!1}},plotOptions:{column:{dataLabels:{enabled:!0,formatter:function(){return"Total"==this.x?10*this.y:this.y}}}},series:datas.series}),$("#div_graphRepart").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:"Type de carte"},tooltip:{pointFormat:"Nombre : {point.y}: <br> Pourcentage : {point.percentage:.1f}%"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"{point.y} {point.name}(s)<br>{point.percentage:.1f}%",style:{color:Highcharts.theme&&Highcharts.theme.contrastTextColor||"black"}}}},series:[{type:"pie",name:"Type",data:datas.dataSeries}]})}},{id_deck:p_params.id,code_user:$.Oda.Session.code_user})}}),$.Oda.Scope.refresh=function(){$("#deckName").data("isOk")&&$("#deckCmt").data("isOk")?$("#bt_valider").removeClass("disabled"):$("#bt_valider").addClass("disabled")}}},{id_deck:p_params.id})}return this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.GererDeck.seeDeck : "+er.message),null}},recNewDeck:function(p_params){try{{var input_nom=($("#deckActif").val(),$("#deckName").val()),input_type=$("#deckType").val(),tabInput={code_user:$.Oda.Session.code_user,nomDeck:input_nom};$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/checkNomDeck.php",{functionRetour:function(json_retour){if("0"!==json_retour.data.resultat.exists)$.Oda.Display.Notification.warning("Nom du deck déjà existant.");else var tabInput={nom_deck:input_nom,type:input_type,classe:$("#deckClass").val(),code_user:$.Oda.Session.code_user},json_retour=$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/validerDeck.php",{functionRetour:function(json_retour){$.Oda.App.Controler.GererDeck.loadListDeck(),$.Oda.Display.Popup.close(),$.Oda.Display.Notification.success("Création réussi.")}},tabInput)}},tabInput)}return this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.GererDeck.recNewDeck : "+er.message),null}},recHeaderDeck:function(p_params){try{var input_actif=$("#deckActif").val(),input_nom=$("#deckName").val(),input_type=$("#deckType").val(),input_cmt=$("#deckCmt").val();if(""!==input_nom)if(p_params.oldName!==input_nom){var tabInput={code_user:$.Oda.Session.code_user,nomDeck:input_nom};$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/checkNomDeck.php",{context:{idDeck:p_params.deckId},functionRetour:function(json_retour){if("0"!==json_retour.data.resultat.exists)$.Oda.Display.Notification.warning("Nom du deck déjà existant.");else var tabInput={id_deck:json_retour.context.idDeck,input_actif:"on"===input_actif?1:0,input_nom:input_nom,input_type:input_type,input_cmt:input_cmt},json_retour=$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/setHeaderDeck.php",{functionRetour:function(json_retour){$.Oda.App.Controler.GererDeck.loadListDeck(),$.Oda.Display.Popup.close(),$.Oda.Display.Notification.success("Mise &agrave; jour r&eacute;ussi.")}},tabInput)}},tabInput)}else{var tabInput={id_deck:p_params.deckId,input_actif:"on"===input_actif?1:0,input_nom:"",input_type:input_type,input_cmt:input_cmt};$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/setHeaderDeck.php",{functionRetour:function(json_retour){$.Oda.App.Controler.GererDeck.loadListDeck(),$.Oda.Display.Popup.close(),$.Oda.Display.Notification.success("Mise &agrave; jour r&eacute;ussi.")}},tabInput)}else $.Oda.Display.Notification.warning("Nom du deck vide.");return this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.GererDeck.recHeaderDeck : "+er.message),null}},buildDatasForGraph:function(p_datas){try{var obj={categories:["0","1","2","3","4","5","6","7+","Total"],series:[]},data={name:"Coût",color:"#0040FF"},array=[];for(var indice in p_datas.coutRepartition.data)array[array.length]=parseInt(p_datas.coutRepartition.data[indice].nb);array[array.length]=parseInt(p_datas.coutSum)/10,data.data=array,obj.series[obj.series.length]=data;var data={name:"Vie",color:"#BA1F1F"},array=[];for(var indice in p_datas.vieRepartition.data)array[array.length]=parseInt(p_datas.vieRepartition.data[indice].nb);array[array.length]=parseInt(p_datas.vieSum)/10,data.data=array,obj.series[obj.series.length]=data;var data={name:"Attaque",color:"#D8E524"},array=[];for(var indice in p_datas.attaqueRepartition.data)array[array.length]=parseInt(p_datas.attaqueRepartition.data[indice].nb);array[array.length]=parseInt(p_datas.attaqueSum)/10,data.data=array,obj.series[obj.series.length]=data;var array=[];for(var indice in p_datas.reparType.data){var data={name:"",y:0};data.name=p_datas.reparType.data[indice].type,data.y=parseInt(p_datas.reparType.data[indice].nb),array[array.length]=data}return obj.dataSeries=array,obj}catch(er){$.Oda.Log.error("buildSimpleSeriesForSimpleColumn :"+er.message)}}},RecMatchs:{start:function(p_params){try{return $.Oda.App.Controler.RecMatchs.getMatch({id:0}),this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.RecMatchs.start : "+er.message),null}},getMatch:function(p_params){try{{var tabInput={id_match:p_params.id,code_user:$.Oda.Session.code_user};$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/getMatch.php",{functionRetour:function(p_retour){"undefined"!=typeof p_retour.data.match.id?$.Oda.Log.info("trouvé"):$.Oda.App.Controler.RecMatchs.newMatch()}},tabInput)}return this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.RecMatchs.getMatch : "+er.message),null}},newMatch:function(p_params){try{var strHtml=$.Oda.Display.TemplateHtml.create({template:"recMatchNew",scope:{}});return $("#content-recMatchs").html(strHtml),$.Oda.Scope.init({id:"content-recMatchs"}),$.Oda.Scope.refresh=function(){$("#matchType").data("isOk")&&$("#matchNameAdv").data("isOk")&&$("#matchClass").data("isOk")&&$("#input_deck").data("isOk")?$("#bt_valider").removeClass("disabled"):$("#bt_valider").addClass("disabled")},$("#matchType").on("change",function(event){var optionSelected=$("option:selected",this),valueSelected=this.value;$.Oda.App.Controler.RecMatchs.chargerListDeck({optionSelected:optionSelected,valueSelected:valueSelected})}),this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.RecMatchs.newMatch : "+er.message),null}},chargerListDeck:function(p_params){try{var type="";switch(p_params.valueSelected){case"Classé":case"Non classé":type="regular";break;case"Arène":type="arene"}{var tabInput={code_user:$.Oda.Session.code_user,option_actif:1,type:type,typeMatch:p_params.valueSelected};$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/getListDeck.php",{functionRetour:function(json_retour){var strHtml='<div class="form-group"><label for="input_deck" class="select">Deck choisi :</label>';strHtml+='<select class="form-control" oda-input-select="input_deck" required>',strHtml+='<option value="" oda-label="oda-main.select-default"></option>';for(var indice in json_retour.data.listDeck.data)strHtml+='<option value="'+json_retour.data.listDeck.data[indice].id+'">'+json_retour.data.listDeck.data[indice].classe+" - "+json_retour.data.listDeck.data[indice].nom_deck+" ("+json_retour.data.listDeck.data[indice].quote+"%)</option>";strHtml+="</select></div>",$.Oda.Display.render({id:"div_nom_deck",html:strHtml})}},tabInput)}return this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.RecMatchs.chargerListDeck : "+er.message),null}},recNewMatch:function(p_params){try{{var id_deck=$("#input_deck").val(),type=$("#matchType").val(),nom_adv=$("#matchNameAdv").val(),input_coin=$("#matchCoin").val(),classe_adv=$("#matchClass").val(),tabInput={id_deck:id_deck,type:type,nom_adv:nom_adv,classe_adv:classe_adv,code_user:$.Oda.Session.code_user,coin:input_coin};$.Oda.Interface.callRest($.Oda.Context.rest+"phpsql/creerMatch.php",{functionRetour:function(json_retour){$("#content-recMatchs").html(""),$.Oda.App.Controler.RecMatchs.getMatch({id:json_retour.data.resultatInsert})}},tabInput)}return this}catch(er){return $.Oda.Log.error("$.Oda.App.Controler.RecMatchs.recNewMatch : "+er.message),null}}}}},_init()}();